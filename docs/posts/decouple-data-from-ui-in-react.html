<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CZ0TSM98BL"></script><script>
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments)}
							gtag('js', new Date());

							gtag('config', 'G-CZ0TSM98BL');
					</script><meta charSet="utf-8"/><title>Decouple Data from UI in React Part 2 by Suhan Wijaya</title><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="title" content="Decouple Data from UI in React Part 2 by Suhan Wijaya"/><meta name="description" content="A further exploration of the Hooks, Render Props, and HOC patterns"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.suhanwijaya.com/posts/decouple-data-from-ui-in-react"/><meta property="og:title" content="Decouple Data from UI in React Part 2 by Suhan Wijaya"/><meta property="og:description" content="A further exploration of the Hooks, Render Props, and HOC patterns"/><meta property="og:image" content="https://cdn-images-1.medium.com/max/556/1*goD09hSrSRRjYBjiCrimJQ.jpeg"/><meta name="twitter:title" content="Decouple Data from UI in React Part 2 by Suhan Wijaya"/><meta name="twitter:description" content="A further exploration of the Hooks, Render Props, and HOC patterns"/><meta name="twitter:image" content="https://cdn-images-1.medium.com/max/556/1*goD09hSrSRRjYBjiCrimJQ.jpeg"/><meta name="twitter:card" content="summary_large_image"/><link rel="canonical" href="https://medium.com/javascript-in-plain-english/how-to-decouple-data-from-ui-in-react-d6b1516f4f0b"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.41d99ff8.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.41d99ff8.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-08372472a9a690b518ed.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/c8817c810ac732b2202d2ab097cea034b8097b3b.d4f57090bd55662b89aa.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.2fb92792e98ddc01317c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3f426cc9284b0d3f87e0.js" as="script"/><link rel="preload" href="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.80435513b29873052229.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-bcc071037589a25d6519.js" as="script"/></head><body><div id="__next"><div class="layout_GvkLX hasTopMenu_1WVP3"><nav class="menu_2G6rj topMenu_3pGJ_"><h2 class="name_10dbC">suhan <br/>wijaya</h2><ul class="menuItems_26ie3"><li class="menuItem_5m-L2"><a href="/#intro">INTRO</a></li><li class="menuItem_5m-L2"><a href="/#about">ABOUT</a></li><li class="menuItem_5m-L2"><a href="/#blog">BLOG</a></li><li class="menuItem_5m-L2"><a href="/#projects">PROJECTS</a></li><li class="menuItem_5m-L2"><a href="/#contact">CONTACT</a></li><li class="menuItem_5m-L2"><a href="/#toolbox">TOOLBOX</a></li></ul><a href="mailto:suhanw@gmail.com" target="_blank" class="email_3kN3h">suhanw@gmail.com</a><div class="social_3_hb2"><a href="https://www.linkedin.com/in/suhanwijaya/" target="_blank"><img src="/images/linked-in.png" alt="Suhan&#x27;s LinkedIn profile"/></a><a href="https://twitter.com/suhanw" target="_blank"><img src="/images/twitter.png" alt="Suhan&#x27;s Twitter profile"/></a><a href="https://github.com/suhanw" target="_blank"><img src="/images/github.png" alt="Suhan&#x27;s GitHub profile"/></a></div><ul class="topMenuItems_3Vx-y"><li class="menuItem_5m-L2"><a href="/#blog">BACK TO HOME</a></li></ul></nav><button class="hamburger_1KX_H"><img src="/images/hamburger.png"/></button><article class="contentWrapper_1Wy1l"><h1 class="title_29RlI">Decouple Data from UI in React Part 2</h1><div class="description_1Da_c">A further exploration of the Hooks, Render Props, and HOC patterns</div><div class="date_2avFh"><time dateTime="2020-12-15">Dec 15, 2020</time><span class="socialIcons_2XzlR"><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.suhanwijaya.com/posts/decouple-data-from-ui-in-react" target="_blank" aria-label="Share this article on LinkedIn"><img src="/images/linkedin-share.png"/></a><a href="https://twitter.com/intent/tweet?text=Decouple Data from UI in React Part 2 by Suhan Wijaya%20@suhanw%20https://www.suhanwijaya.com/posts/decouple-data-from-ui-in-react" target="_blank" aria-label="Share this article on Twitter"><img src="/images/twitter-share.png"/></a></span></div><div class="content_33yU5"><figure>
	<img src='https://cdn-images-1.medium.com/max/556/1*goD09hSrSRRjYBjiCrimJQ.jpeg'>
	<figcaption>c. 1512, Oil on canvas, Source: <a href="https://programming-memes.com/do-you-like-spaghetti/">programming-memes.com</a></figcaption>
</figure>
<hr>
<p>In <a href="/posts/decouple-data-from-ui-with-react-hooks">Part 1</a>, I presented an approach to decouple the data fetching/management layer from the UI, which would free us from being locked into any particular data library or framework. Let’s call this <strong>Approach A</strong>.</p>
<h3>Approach A. Custom Hook</h3>
<p>Let’s create a custom hook — <code>useSomeData</code> — that returns the properties <code>someData</code>, <code>loading</code>, and <code>error</code> regardless of the data fetching/management logic. The following are 3 different implementations of <code>useSomeData</code>.</p>
<p><em>With Fetch API and component state:</em></p>
<script src="https://gist.github.com/suhanw/8d1b24a42dea617288e28d767996e7cc.js"></script>
<p><em>With Redux:</em></p>
<script src="https://gist.github.com/suhanw/aac361c9ab4856eed2cf5d5531ce655b.js"></script>
<p><em>With Apollo GraphQL:</em></p>
<script src="https://gist.github.com/suhanw/eaeebbf6afd44b7b5509ec74a27656f7.js"></script>
<p>The 3 implementations above are <strong>interchangeable</strong> without having to modify this UI component:</p>
<script src="https://gist.github.com/suhanw/a08783eb6302899bb91a88572a2ac86c.js"></script>
<p>But, as <a href="https://medium.com/u/3efad7746b00">Julius Koronci</a> correctly pointed out, while the data fetching/management logic is decoupled, the <code>SomeComponent</code> UI is still coupled to the <code>useSomeData</code> hook.</p>
<p>In other words, even though we can reuse <code>useSomeData</code> without <code>SomeComponent</code>, <strong>we cannot reuse</strong>  <strong><code>SomeComponent</code> without</strong>  <strong><code>useSomeData</code>.</strong></p>
<p>Perhaps this is where Render Props and Higher Order Components do a better job at enforcing the separation of concerns (thanks again to Julius for highlighting this).</p>
<hr>
<h3>Approach B. Render Props</h3>
<p>Instead of a custom hook that returns <code>someData</code>, <code>loading</code>, and <code>error</code>, let’s create a Render Props component — <code>SomeData</code> — that wraps around a function (i.e., children needs to be a function), implements the data logic, and passes in <code>someData</code>, <code>loading</code>, and <code>error</code> into the function.</p>
<script src="https://gist.github.com/suhanw/263c954810fc5ab69292ed256e1494aa.js"></script>
<p>You can replace line 4 in the snippet above with Redux, Apollo GraphQL, or any data fetching/management layer of your choice.</p>
<p><strong>We can now reuse</strong> <strong><code>SomeComponent</code> (UI component) without</strong> <strong><code>SomeData</code> (Render Props component). We can also reuse</strong>  <strong><code>SomeData</code> without</strong>  <strong><code>SomeComponent</code>.</strong></p>
<hr>
<h3>Approach C. Higher Order Components (HOC)</h3>
<p>Let’s create a HOC — <code>withSomeData</code> — that accepts a React component as an argument, implements the data logic, and passes <code>someData</code>, <code>loading</code>, and <code>error</code> as props into the wrapped React component.</p>
<script src="https://gist.github.com/suhanw/106e18601dff30a7d3f73a77ab2f861c.js"></script>
<p>You can replace line 5 in the snippet above with Redux, Apollo GraphQL, or any data fetching/management layer of your choice.</p>
<p><strong>We can now reuse</strong> <strong><code>SomeComponent</code> (UI component) without</strong> <strong><code>withSomeData</code> (HOC). We can also reuse</strong>  <strong><code>withSomeData</code> without</strong>  <strong><code>SomeComponent</code>.</strong></p>
<p>Today I learned.</p>
<p>Which approach do you prefer and why?</p>
<hr>
<h3>Resources</h3>
<ul>
<li><a href="https://blog.bitsrc.io/understanding-react-render-props-and-hoc-b37a9576e196">Understanding React Render Props and HOC</a> by <a href="https://medium.com/u/9c555799c00e">Aditya Agarwal</a></li>
<li><a href="https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props">React Hooks: What’s going to happen to render props?</a> by <a href="https://medium.com/u/db72389e89d8">Kent C. Dodds</a></li>
<li><a href="https://www.richardkotze.com/coding/hoc-vs-render-props-react">Higher-order components vs Render Props</a> by <a href="https://medium.com/u/e503a3e5ff3e">Richard Kotze</a></li>
</ul>
<hr>
<h3>Read More</h3>
<ul>
<li><a href="https://medium.com/javascript-in-plain-english/intro-to-react-server-side-rendering-3c2af3782d08">Intro to React Server Side Rendering</a></li>
<li><a href="https://dev.to/suhanw/decouple-data-from-ui-with-react-hooks-3amn">Decouple Data from UI with React Hooks</a></li>
</ul>
</div><div class="footer_2PjJq"><span class="socialIcons_2XzlR"><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.suhanwijaya.com/posts/decouple-data-from-ui-in-react" target="_blank" aria-label="Share this article on LinkedIn"><img src="/images/linkedin-share.png"/></a><a href="https://twitter.com/intent/tweet?text=Decouple Data from UI in React Part 2 by Suhan Wijaya%20@suhanw%20https://www.suhanwijaya.com/posts/decouple-data-from-ui-in-react" target="_blank" aria-label="Share this article on Twitter"><img src="/images/twitter-share.png"/></a></span></div></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"decouple-data-from-ui-in-react","contentHtml":"\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/556/1*goD09hSrSRRjYBjiCrimJQ.jpeg'\u003e\n\t\u003cfigcaption\u003ec. 1512, Oil on canvas, Source: \u003ca href=\"https://programming-memes.com/do-you-like-spaghetti/\"\u003eprogramming-memes.com\u003c/a\u003e\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003chr\u003e\n\u003cp\u003eIn \u003ca href=\"/posts/decouple-data-from-ui-with-react-hooks\"\u003ePart 1\u003c/a\u003e, I presented an approach to decouple the data fetching/management layer from the UI, which would free us from being locked into any particular data library or framework. Let’s call this \u003cstrong\u003eApproach A\u003c/strong\u003e.\u003c/p\u003e\n\u003ch3\u003eApproach A. Custom Hook\u003c/h3\u003e\n\u003cp\u003eLet’s create a custom hook — \u003ccode\u003euseSomeData\u003c/code\u003e — that returns the properties \u003ccode\u003esomeData\u003c/code\u003e, \u003ccode\u003eloading\u003c/code\u003e, and \u003ccode\u003eerror\u003c/code\u003e regardless of the data fetching/management logic. The following are 3 different implementations of \u003ccode\u003euseSomeData\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eWith Fetch API and component state:\u003c/em\u003e\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/8d1b24a42dea617288e28d767996e7cc.js\"\u003e\u003c/script\u003e\n\u003cp\u003e\u003cem\u003eWith Redux:\u003c/em\u003e\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/aac361c9ab4856eed2cf5d5531ce655b.js\"\u003e\u003c/script\u003e\n\u003cp\u003e\u003cem\u003eWith Apollo GraphQL:\u003c/em\u003e\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/eaeebbf6afd44b7b5509ec74a27656f7.js\"\u003e\u003c/script\u003e\n\u003cp\u003eThe 3 implementations above are \u003cstrong\u003einterchangeable\u003c/strong\u003e without having to modify this UI component:\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/a08783eb6302899bb91a88572a2ac86c.js\"\u003e\u003c/script\u003e\n\u003cp\u003eBut, as \u003ca href=\"https://medium.com/u/3efad7746b00\"\u003eJulius Koronci\u003c/a\u003e correctly pointed out, while the data fetching/management logic is decoupled, the \u003ccode\u003eSomeComponent\u003c/code\u003e UI is still coupled to the \u003ccode\u003euseSomeData\u003c/code\u003e hook.\u003c/p\u003e\n\u003cp\u003eIn other words, even though we can reuse \u003ccode\u003euseSomeData\u003c/code\u003e without \u003ccode\u003eSomeComponent\u003c/code\u003e, \u003cstrong\u003ewe cannot reuse\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003eSomeComponent\u003c/code\u003e without\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003euseSomeData\u003c/code\u003e.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003ePerhaps this is where Render Props and Higher Order Components do a better job at enforcing the separation of concerns (thanks again to Julius for highlighting this).\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eApproach B. Render Props\u003c/h3\u003e\n\u003cp\u003eInstead of a custom hook that returns \u003ccode\u003esomeData\u003c/code\u003e, \u003ccode\u003eloading\u003c/code\u003e, and \u003ccode\u003eerror\u003c/code\u003e, let’s create a Render Props component — \u003ccode\u003eSomeData\u003c/code\u003e — that wraps around a function (i.e., children needs to be a function), implements the data logic, and passes in \u003ccode\u003esomeData\u003c/code\u003e, \u003ccode\u003eloading\u003c/code\u003e, and \u003ccode\u003eerror\u003c/code\u003e into the function.\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/263c954810fc5ab69292ed256e1494aa.js\"\u003e\u003c/script\u003e\n\u003cp\u003eYou can replace line 4 in the snippet above with Redux, Apollo GraphQL, or any data fetching/management layer of your choice.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWe can now reuse\u003c/strong\u003e \u003cstrong\u003e\u003ccode\u003eSomeComponent\u003c/code\u003e (UI component) without\u003c/strong\u003e \u003cstrong\u003e\u003ccode\u003eSomeData\u003c/code\u003e (Render Props component). We can also reuse\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003eSomeData\u003c/code\u003e without\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003eSomeComponent\u003c/code\u003e.\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eApproach C. Higher Order Components (HOC)\u003c/h3\u003e\n\u003cp\u003eLet’s create a HOC — \u003ccode\u003ewithSomeData\u003c/code\u003e — that accepts a React component as an argument, implements the data logic, and passes \u003ccode\u003esomeData\u003c/code\u003e, \u003ccode\u003eloading\u003c/code\u003e, and \u003ccode\u003eerror\u003c/code\u003e as props into the wrapped React component.\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/suhanw/106e18601dff30a7d3f73a77ab2f861c.js\"\u003e\u003c/script\u003e\n\u003cp\u003eYou can replace line 5 in the snippet above with Redux, Apollo GraphQL, or any data fetching/management layer of your choice.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWe can now reuse\u003c/strong\u003e \u003cstrong\u003e\u003ccode\u003eSomeComponent\u003c/code\u003e (UI component) without\u003c/strong\u003e \u003cstrong\u003e\u003ccode\u003ewithSomeData\u003c/code\u003e (HOC). We can also reuse\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003ewithSomeData\u003c/code\u003e without\u003c/strong\u003e  \u003cstrong\u003e\u003ccode\u003eSomeComponent\u003c/code\u003e.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eToday I learned.\u003c/p\u003e\n\u003cp\u003eWhich approach do you prefer and why?\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eResources\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.bitsrc.io/understanding-react-render-props-and-hoc-b37a9576e196\"\u003eUnderstanding React Render Props and HOC\u003c/a\u003e by \u003ca href=\"https://medium.com/u/9c555799c00e\"\u003eAditya Agarwal\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props\"\u003eReact Hooks: What’s going to happen to render props?\u003c/a\u003e by \u003ca href=\"https://medium.com/u/db72389e89d8\"\u003eKent C. Dodds\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.richardkotze.com/coding/hoc-vs-render-props-react\"\u003eHigher-order components vs Render Props\u003c/a\u003e by \u003ca href=\"https://medium.com/u/e503a3e5ff3e\"\u003eRichard Kotze\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eRead More\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/javascript-in-plain-english/intro-to-react-server-side-rendering-3c2af3782d08\"\u003eIntro to React Server Side Rendering\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/suhanw/decouple-data-from-ui-with-react-hooks-3amn\"\u003eDecouple Data from UI with React Hooks\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","pin_order":4,"title":"Decouple Data from UI in React Part 2","description":"A further exploration of the Hooks, Render Props, and HOC patterns","image":"https://cdn-images-1.medium.com/max/556/1*goD09hSrSRRjYBjiCrimJQ.jpeg","tags":"react,javascript,webdev,softwaredesign","canonical_url":"https://medium.com/javascript-in-plain-english/how-to-decouple-data-from-ui-in-react-d6b1516f4f0b","author":"Suhan Wijaya","date":"2020-12-15"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"decouple-data-from-ui-in-react"},"buildId":"ytttJcBwagwyVpclGdA6U","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-28a453ab78bd7ac4fdb9.js"></script><script src="/_next/static/chunks/main-08372472a9a690b518ed.js" async=""></script><script src="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" async=""></script><script src="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" async=""></script><script src="/_next/static/chunks/c8817c810ac732b2202d2ab097cea034b8097b3b.d4f57090bd55662b89aa.js" async=""></script><script src="/_next/static/chunks/styles.2fb92792e98ddc01317c.js" async=""></script><script src="/_next/static/chunks/pages/_app-3f426cc9284b0d3f87e0.js" async=""></script><script src="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.80435513b29873052229.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-bcc071037589a25d6519.js" async=""></script><script src="/_next/static/ytttJcBwagwyVpclGdA6U/_buildManifest.js" async=""></script><script src="/_next/static/ytttJcBwagwyVpclGdA6U/_ssgManifest.js" async=""></script></body></html>