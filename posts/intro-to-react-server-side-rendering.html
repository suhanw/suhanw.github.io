<!DOCTYPE html><html><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CZ0TSM98BL"></script><script>
									window.dataLayer = window.dataLayer || [];
									function gtag(){dataLayer.push(arguments)}
									gtag('js', new Date());
	
									gtag('config', 'G-CZ0TSM98BL');
							</script><meta charSet="utf-8"/><title>Intro to React Server Side Rendering by Suhan Wijaya</title><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="title" content="Intro to React Server Side Rendering by Suhan Wijaya"/><meta name="description" content="How to build a React SSR app without any tooling or framework"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.suhanwijaya.com/posts/intro-to-react-server-side-rendering"/><meta property="og:title" content="Intro to React Server Side Rendering by Suhan Wijaya"/><meta property="og:description" content="How to build a React SSR app without any tooling or framework"/><meta property="og:image" content="https://cdn-images-1.medium.com/max/900/1*PXvYmj3eEqaRigoFGcJZTA.jpeg"/><meta name="twitter:title" content="Intro to React Server Side Rendering by Suhan Wijaya"/><meta name="twitter:description" content="How to build a React SSR app without any tooling or framework"/><meta name="twitter:image" content="https://cdn-images-1.medium.com/max/900/1*PXvYmj3eEqaRigoFGcJZTA.jpeg"/><meta name="twitter:card" content="summary_large_image"/><link rel="canonical" href="https://medium.com/javascript-in-plain-english/intro-to-react-server-side-rendering-3c2af3782d08"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.86014841.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.86014841.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-5e53dfd826fb0870df0c.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/c8817c810ac732b2202d2ab097cea034b8097b3b.0aef9695673ee5c17c2c.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.4e63e5dd6521d2c490cd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-bc363205d93151ffb13d.js" as="script"/><link rel="preload" href="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.394c661130a14bd5fdbf.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-c120c2a45802d4c26e9e.js" as="script"/></head><body><div id="__next"><div class="layout_GvkLX"><nav class="menu_2G6rj"><h2 class="name_10dbC">suhan <br/>wijaya</h2><ul class="menuItems_26ie3"><li class="menuItem_5m-L2"><a href="/#intro">INTRO</a></li><li class="menuItem_5m-L2"><a href="/#about">ABOUT</a></li><li class="menuItem_5m-L2"><a href="/#blog">BLOG</a></li><li class="menuItem_5m-L2"><a href="/#projects">PROJECTS</a></li><li class="menuItem_5m-L2"><a href="/#contact">CONTACT</a></li><li class="menuItem_5m-L2"><a href="/#toolbox">TOOLBOX</a></li></ul><a href="mailto:suhanw@gmail.com" target="_blank" class="email_3kN3h">suhanw@gmail.com</a><div class="social_3_hb2"><a href="https://www.linkedin.com/comm/in/suhanwijaya/" target="_blank"><img src="/images/linked-in.png" alt="Suhan&#x27;s LinkedIn profile"/></a><a href="https://x.com/suhanw" target="_blank"><img src="/images/twitter-x.png" alt="Suhan&#x27;s Twitter profile"/></a><a href="https://github.com/suhanw" target="_blank"><img src="/images/github.png" alt="Suhan&#x27;s GitHub profile"/></a></div><ul class="topMenuItems_3Vx-y"><li class="menuItem_5m-L2"><a href="/#blog">BACK TO HOME</a></li></ul></nav><button class="hamburger_1KX_H"><img src="/images/hamburger.png"/></button><article class="contentWrapper_1Wy1l"><h1 class="title_29RlI">Intro to React Server Side Rendering</h1><div class="description_1Da_c">How to build a React SSR app without any tooling or framework</div><div class="date_2avFh"><time dateTime="2021-01-11">Jan 11, 2021</time><span class="socialIcons_2XzlR"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.suhanwijaya.com/posts/intro-to-react-server-side-rendering" target="_blank" aria-label="Share this article on LinkedIn"><img src="/images/linkedin-share.png"/></a><a href="https://x.com/intent/tweet?text=Intro to React Server Side Rendering by Suhan Wijaya%20@suhanw%20https://www.suhanwijaya.com/posts/intro-to-react-server-side-rendering" target="_blank" aria-label="Share this article on Twitter"><img src="/images/twitter-x-share.png"/></a></span></div><div class="content_33yU5"><figure>
	<img src='https://cdn-images-1.medium.com/max/900/1*PXvYmj3eEqaRigoFGcJZTA.jpeg'>
	<figcaption>Source: <a href="https://www.reddit.com/r/ProgrammerHumor/comments/5lnsko/programming_environment_dilbert_comic_strip_on/">Reddit</a> and Dilbert by Scott Adams</figcaption>
</figure>
<hr>
<p>This is the first in (hopefully) a series of articles to document the lessons I learned building and maintaining SSR apps.</p>
<p>This article does not cover the pros/cons of SSR, or the pros/cons of not using tooling or frameworks (e.g., Create React App, Next.js, etc).</p>
<p>I fully acknowledge that manually setting up build configs is painful. There is plenty of great tooling out there to abstract away these configs, so you probably don‚Äôt even need to touch any of this stuff to build awesome apps.</p>
<p>But for those ready to embrace the pain‚Ä¶</p>
<hr>
<h3>Overview</h3>
<p>Let‚Äôs start with the basics. We will use <strong>React</strong> , <strong>webpack</strong> , and <strong>Express</strong> to build an SSR app that works as follows:</p>
<ol>
<li>Browser sends HTTP request to server to load a page.</li>
<li>Server receives HTTP request and turns React JSX into HTML markup.</li>
<li>Server inserts the markup into a HTML template and sends the HTML response back to the browser.</li>
<li>Browser renders the HTML, downloads the client-side JavaScript bundle, and ‚Äúhydrates‚Äù the HTML.</li>
</ol>
<p>Also, I will focus on dev mode to keep this article short. I‚Äôm saving production mode for a future(ish üòÖ) article.</p>
<hr>
<h3>Project structure</h3>
<p>Before diving into the code, let‚Äôs get situated with the project structure.</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">.
+-- client
| +-- components
| | +-- App
| | | +-- index.js
| | | +-- style.less
| +-- index.js
+-- server
| +-- index.js
+-- babel.config.js
+-- package.json
+-- webpack.client.config.js
+-- webpack.server.config.js
+-- webpack.shared.config.js</code></pre></div>
<p>A quick rundown of the files in this project:</p>
<ul>
<li><code class="language-unknown">./client/components</code> contains React and CSS code.</li>
<li><code class="language-unknown">./client/index.js</code> is the client-side <a href="https://webpack.js.org/concepts/entry-points/">entry point</a> for webpack, where we ‚Äúhydrate‚Äù the HTML rendered on the server-side.</li>
<li><code class="language-unknown">./server/index.js</code> is the server-side <a href="https://webpack.js.org/concepts/entry-points/">entry point</a> for webpack, where we define the route to serve the HTML page.</li>
<li><code class="language-unknown">./babel.config.js</code> is the <a href="https://babeljs.io/docs/en/config-files#configuration-file-types">thing</a> that enables you to use React JSX and ES6+ features in the browser and Node.js. You may have seen alternative versions of this file (.babelrc, babel.config.json, etc).</li>
<li><code class="language-unknown">./webpack.shared.config.js</code> is the config that webpack uses for both client-side and server-side code.</li>
<li><code class="language-unknown">./webpack.client.config.js</code> is the config specific to the client-side code.</li>
<li><code class="language-unknown">./webpack.server.config.js</code> is the config specific to the server-side code.</li>
</ul>
<hr>
<h3>Dependencies</h3>
<p>Here are the dependencies (and versions) used at the time of this writing. I will also mention which relevant dependencies to install in each of the following sections.</p>
<script src='https://gist.github.com/suhanw/2afd2841c1beb5a107b5547b27b786be.js'></script>
<p>Now let‚Äôs look at each file in our project in more detail.</p>
<hr>
<h3>webpack</h3>
<p>If you are accustomed to building SPAs (Single Page Apps), you may not have needed webpack to process your server-side code. But to enable SSR, the server must be able to read React code, or specifically‚Ää‚Äî‚ÄäJSX. This means, we now need webpack to work its magic on our server-side code. Plus, you‚Äôll also get to use ES6+ syntax that may not be natively supported in Node.js, e.g., import and export. (Sidenote: you don‚Äôt need webpack if you choose <a href="https://reactjs.org/docs/react-without-jsx.html">not to write JSX</a> at all. üò¨)</p>
<p>I won‚Äôt go through every webpack option in great detail, but here is a <a href="https://www.valentinog.com/blog/webpack/">great explainer</a> if you are interested.</p>
<h4><em>Common webpack config for client-side and server-side</em></h4>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i webpack webpack-cli babel-loader</code></pre></div>
<script src='https://gist.github.com/suhanw/128bbb5bdfb18b854d0ca0ed2ee5b884.js'></script>
<p>Annotations of the code comments above:</p>
<p><strong>[A]</strong> For our purposes, we want to explicitly set <code class="language-unknown">mode</code> to <strong>development</strong>. If we go with the default value of <strong>production</strong> , we may lose useful console warnings/errors from libraries like React, and the error stack traces are incredibly hard to read due to code minification. Read more about <strong>production</strong> and <strong>development</strong> modes <a href="https://webpack.js.org/configuration/mode/">here</a>.</p>
<p><strong>[B]</strong> This tells webpack to preprocess <code class="language-unknown">.js</code> files with <code class="language-unknown">babel-loader</code>, which <a href="https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them#:~:text=Transpilers%2C%20or%20source%2Dto%2D,are%20said%20to%20target%20JavaScript.">transpiles</a> ES6+ and JSX code into JavaScript code that is readable by browsers and Node.js servers. This loader uses the options we specify in <code class="language-unknown">babel.config.js</code>.</p>
<p><strong>[C]</strong> This means I don‚Äôt have to type out <code class="language-unknown">.js</code> or <code class="language-unknown">.less</code> when importing files with those extensions. For example, <code class="language-unknown">import App from ‚Äò./components/App‚Äô</code>.</p>
<h4><em>Babel config</em></h4>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i babel-loader @babel/core @babel/preset-env @babel/preset-react</code></pre></div>
<script src='https://gist.github.com/suhanw/33f2d36ef3922ebbb4ce3d425e407eaa.js'></script>
<p>Annotations of the code comments above:</p>
<p><strong>[A]</strong> This tells webpack to transpile ES6+ features into JS code that‚Äôs natively supported in Node.js and (most modern) browsers. Read the <a href="https://babeljs.io/docs/en/babel-preset-env">docs</a> for more details.</p>
<p><strong>[B]</strong> This tells webpack to transpile React JSX into JavaScript code. Read the <a href="https://babeljs.io/docs/en/babel-preset-react">docs</a> for more details.</p>
<h4><em>Client-side webpack config</em></h4>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i webpack webpack-cli webpack-merge webpack-dev-server mini-css-extract-plugin css-loader less-loader less</code></pre></div>
<script src='https://gist.github.com/suhanw/98c17ffc82967bc28a84289f9b55d54b.js'></script>
<p>Annotations of the code comments above:</p>
<p><strong>[A]</strong> This is the entry point for the client-side code, where we render the React app into the DOM.</p>
<p><strong>[B]</strong> This tells webpack to save the transpiled client-side JS bundle output as <code class="language-unknown">./build/client/scripts/bundle.js</code>. Not super important for dev mode because we are using webpack-dev-server to transpile the client-side bundle ‚Äúin memory‚Äù. Per the <a href="https://webpack.js.org/guides/development/#using-webpack-dev-server">docs</a>:</p>
<blockquote>
<p><code class="language-unknown">webpack-dev-server</code> doesn‚Äôt write any output files after compiling. Instead, it keeps bundle files in memory and serves them as if they were real files mounted at the server‚Äôs root path.</p>
</blockquote>
<p><strong>[C]</strong> The <code class="language-unknown">publicPath</code> option tells webpack where we will be serving the client-side bundle. Notice that we are using the same <code class="language-unknown">clientPort</code> for <code class="language-unknown">devServer</code>, which tells <code class="language-unknown">webpack-dev-server</code> to serve the client-side bundle from <code class="language-unknown">http://localhost:8080/</code>. And since the <code class="language-unknown">filename</code> option tells webpack to nest <code class="language-unknown">bundle.js</code> in a <code class="language-unknown">scripts</code> folder, the client-side bundle will be served from <code class="language-unknown">localhost:8080/scripts/bundle.js</code>.</p>
<p><strong>[D]</strong> <a href="https://css-tricks.com/css-modules-part-1-need/">CSS modules</a> and CSS preprocessors (e.g., Less, Sass) deserve an article. But in a nutshell, this piece of config tells webpack to:</p>
<ul>
<li>transpile <code class="language-unknown">.less</code> files into CSS code that the browser understands,</li>
<li>allow us to <code class="language-unknown">import style from ‚Äò./style.less‚Äô</code> which is scoped <strong>locally</strong> to the component importing it (i.e., we don‚Äôt have to worry about CSS class naming collisions or specificity issues as the app grows),</li>
<li>generate a CSS bundle that‚Äôs served separately from the JS bundle. In this instance, the <code class="language-unknown">MiniCssExtractPlugin</code> tells webpack to serve the CSS bundle from <code class="language-unknown">localhost:8080/styles/bundle.css</code> in dev mode.</li>
</ul>
<p><strong>[E]</strong> Remember <code class="language-unknown">webpack.shared.config.js</code>? This line merges <code class="language-unknown">webpack.shared.config.js</code> with <code class="language-unknown">webpack.client.config.js</code>.</p>
<h4><em>Server-side webpack config</em></h4>
<p>Hang in there, this is the last webpack config that we‚Äôll cover.</p>
<p>Install the relevant dependencies (and grab a ‚òïÔ∏è):</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i webpack webpack-cli webpack-node-externals css-loader</code></pre></div>
<script src='https://gist.github.com/suhanw/93565516165d8225566ee0dcac854e3d.js'></script>
<p>Annotations of the code comments above:</p>
<p><strong>[A]</strong> The default value is <strong>web</strong>, so we need to explicitly set it to <strong>node</strong> for webpack to work its magic on the server-side code.</p>
<p><strong>[B]</strong> This is the entry point for the server-side code.</p>
<p><strong>[C]</strong> This tells webpack to save the transpiled server-side JS bundle output as <code class="language-unknown">./build/server/bundle.js</code>.</p>
<p><strong>[D]</strong> This tells webpack not to include the code from <code class="language-unknown">node\_modules</code> in the server-side bundle.</p>
<p><strong>[E]</strong> This tells webpack not to do any work over the CSS code on the server-side, but simply to make sure that every HTML element‚Äôs <code class="language-unknown">className</code> matches that in the CSS code being served on the client-side.</p>
<p><strong>[F]</strong> Remember <code class="language-unknown">webpack.shared.config.js</code>? This line merges <code class="language-unknown">webpack.shared.config.js</code> with <code class="language-unknown">webpack.server.config.js</code>.</p>
<hr>
<h3>React component</h3>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i react</code></pre></div>
<p>Let‚Äôs create a simple React component <code class="language-unknown">App</code>, which renders our favorite greeting with some basic styles, as well as a button that displays an alert dialog when clicked. We will render this component on the server-side and hydrate it on the client-side.</p>
<script src='https://gist.github.com/suhanw/22786482aae23f82852b3fa15faf46e0.js'></script>
<script src='https://gist.github.com/suhanw/ff1f2997761dbec42ae3a80b7c7bdca2.js'></script>
<hr>
<h3>Server-side code</h3>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i express react react-dom</code></pre></div>
<p>Let‚Äôs create an Express server and define a route that serves an HTML page when a user visits <code class="language-unknown">http://localhost:3000/</code>.</p>
<script src='https://gist.github.com/suhanw/23f6122050af076a51199a8d4b165d5b.js'></script>
<p>Annotations of the code comments above:</p>
<p><strong>[A]</strong> This turns the React component <code class="language-unknown">App</code> into HTML string, which we then insert in between the <code class="language-unknown">div</code> with the ID <strong>‚Äússr-app‚Äù.</strong></p>
<p><strong>[B]</strong> Remember the <code class="language-unknown">devServer</code> option in <code class="language-unknown">webpack.client.config.js</code> to start <code class="language-unknown">webpack-dev-server</code> in dev mode? These script and link tags tell the browser to fetch the client-side JS and CSS bundles respectively from the webpack-dev-server running on <code class="language-unknown">http://localhost:8080</code>.</p>
<hr>
<h3>Client-side code</h3>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i react react-dom</code></pre></div>
<p>In the client-side entry point, we will ‚Äú<a href="https://reactjs.org/docs/react-dom.html#hydrate">hydrate</a>‚Äù the React component that was SSR-ed into the root DOM container with the ID <strong>‚Äússr-app‚Äù</strong>.</p>
<script src='https://gist.github.com/suhanw/be366494b9bf2bdbd2272c732f1bbbe8.js'></script>
<p>Per the <a href="https://reactjs.org/docs/react-dom-server.html#rendertostring">docs</a>:</p>
<blockquote>
<p>If you call <a href="https://reactjs.org/docs/react-dom.html#hydrate"><em>ReactDOM.hydrate()</em></a> on a node that already has this server-rendered markup, React will preserve it and only attach event handlers, allowing you to have a very performant first-load experience.</p>
</blockquote>
<p>So in this example, the client-side code simply attaches the button‚Äôs click handler without having to re-render any markup in the <code class="language-unknown">App</code> component.</p>
<hr>
<h3>Putting it all together</h3>
<p>Install the relevant dependencies:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">npm i rimraf webpack webpack-cli webpack-dev-server npm-run-all nodemon</code></pre></div>
<p>This is the <code class="language-unknown">scripts</code> key in the <code class="language-unknown">package.json</code> file, where we define several <code class="language-unknown">npm</code> scripts to build and start the app in dev mode.</p>
<script src='https://gist.github.com/suhanw/5c87c373511b0d2e053ebca5fde8d6aa.js'></script>
<p>Let‚Äôs look at each of them:</p>
<ul>
<li><code class="language-unknown">clear</code>‚Ää‚Äî‚ÄäThis uses <a href="https://github.com/isaacs/rimraf">rimraf</a> to delete the <code class="language-unknown">./build</code> folder.</li>
<li><code class="language-unknown">build:server</code>‚Ää‚Äî‚ÄäThis tells webpack to build the server-side code and save the bundle output to <code class="language-unknown">./build/server/bundle.js</code> (as per <code class="language-unknown">./webpack.server.config.js</code>).</li>
<li><code class="language-unknown">start:server</code>‚Ää‚Äî‚ÄäThis starts the Express server on <code class="language-unknown">http://localhost:3000</code>.</li>
<li><code class="language-unknown">dev:server</code>‚Ää‚Äî‚ÄäThis uses <a href="https://github.com/remy/nodemon">nodemon</a> to monitor any file changes in the working directory (minus <code class="language-unknown">./build</code>), and <a href="https://dev.to/scottw/npm-run-all-b7e-temp-slug-8424854">npm-run-all</a> to re-run <code class="language-unknown">clear</code>, <code class="language-unknown">build:server</code>, and <code class="language-unknown">start:server</code> whenever there are file changes.</li>
<li><code class="language-unknown">dev:client</code>‚Ää‚Äî‚ÄäThis tells webpack to ‚Äúbuild‚Äù the client-side code, save the bundle output ‚Äúin memory‚Äù, and serve it from <code class="language-unknown">http://localhost:8080</code> (as per <code class="language-unknown">./webpack.client.config.js</code>).</li>
<li><code class="language-unknown">dev</code>‚Ää‚Äî‚ÄäThis runs all of the above with a single command.</li>
</ul>
<p>Run <code class="language-unknown">npm run dev</code> in the terminal to spin up the SSR app. Open up <code class="language-unknown">http://localhost:3000</code> in your browser. üéâü•≥</p>
<figure>
	<img src='https://cdn-images-1.medium.com/max/1024/1*ht6aRr0glttBE5TlouMJJQ.png'><figcaption>Server-side rendering and client-side hydration</figcaption>
</figure>
<p>And click on the button <code class="language-unknown">Say Hello Back!</code> üôåüéä</p>
<figure>
	<img src='https://cdn-images-1.medium.com/max/1024/1*JcnDOG4whmExaBhNoyG8Vg.png'><figcaption>Clicking the button triggers the alert dialog</figcaption>
</figure>
<p>Now, let‚Äôs disable client-side JavaScript‚Ä¶</p>
<figure>
	<img src='https://cdn-images-1.medium.com/max/722/1*43qx5zcj8QnwSjXQT-Nhsw.png'><figcaption>Disable client-side JavaScript</figcaption>
</figure>
<p>‚Ä¶and refresh the page. IT‚ÄôS NOT A BLANK PAGE! ü§Ø</p>
<figure>
	<img src='https://cdn-images-1.medium.com/max/1024/1*fFgBAnbm-9c3gN6J_yA1eg.png'><figcaption>Server-side rendered page</figcaption>
</figure>
<p>Sidenote: nothing will happen if you click on the button. That‚Äôs because the event handlers are attached by the client-side code (aka ‚Äúhydration‚Äù). Recall the <a href="https://reactjs.org/docs/react-dom-server.html#rendertostring">docs</a>:</p>
<blockquote>
<p>If you call <a href="https://reactjs.org/docs/react-dom.html#hydrate"><em>ReactDOM.hydrate()</em></a> on a node that already has this server-rendered markup, React will preserve it and only attach event handlers, allowing you to have a very performant first-load experience.</p>
</blockquote>
<p>And since we disabled client-side JavaScript, what you see is just plain HTML.</p>
<figure>
	<img src='https://cdn-images-1.medium.com/max/894/1*xGp1Ds4XtlabyFoGwI2G1A.jpeg'><figcaption>Source: <a href="https://www.thecoderpedia.com/blog/programming-memes/">CoderPedia</a></figcaption>
</figure>
<p>In future(ish üòÖü§ûüèª) articles, I plan to cover more advanced features like routing, data fetching, caching, code-splitting, lazy-loading, and deploying a production app.</p>
<hr>
<h3>Resources</h3>
<ul>
<li><a href="https://www.valentinog.com/blog/webpack/">A mostly complete guide to webpack 5</a> by <a href="https://twitter.com/gagliardi_vale">Valentino Gagliardi</a></li>
<li><a href="https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them#:~:text=Transpilers,%20or%20source-to-,are%20said%20to%20target%20JavaScript.">JavaScript Transpilers: What &#x26; Why</a> by <a href="https://medium.com/u/1baf735d9bdc">Peleke Sengstacke</a></li>
<li><a href="https://css-tricks.com/css-modules-part-1-need/">What are CSS Modules and why do we need them?</a> by <a href="https://medium.com/u/aae529a3f8b0">Robin Rendle</a></li>
</ul>
<hr>
<h3>Read More</h3>
<ul>
<li><a href="https://www.suhanwijaya.com/posts/deploy-react-ssr-to-production">Deploy React SSR to Production</a></li>
<li><a href="https://www.suhanwijaya.com/posts/use-github-actions-deploy-nextjs-ssg-site">Use GitHub Actions to Deploy a Next.js SSG Site</a></li>
<li><a href="https://dev.to/suhanw/decouple-data-from-ui-with-react-hooks-3amn">Decouple Data from UI with React Hooks</a></li>
</ul>
</div><div class="footer_2PjJq"><span class="socialIcons_2XzlR"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.suhanwijaya.com/posts/intro-to-react-server-side-rendering" target="_blank" aria-label="Share this article on LinkedIn"><img src="/images/linkedin-share.png"/></a><a href="https://x.com/intent/tweet?text=Intro to React Server Side Rendering by Suhan Wijaya%20@suhanw%20https://www.suhanwijaya.com/posts/intro-to-react-server-side-rendering" target="_blank" aria-label="Share this article on Twitter"><img src="/images/twitter-x-share.png"/></a></span></div><div class="author_3TJVZ"><a href="https://www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=suhanwijaya"><img src="https://github.com/suhanw.png?size=200"/></a><span>Liked what you&#x27;ve read? <br/><a href="https://www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=suhanwijaya">Follow me on LinkedIn!</a></span></div></article><nav class="bottomMenu_SThI5"><div class="author_tJtt2"><a href="https://www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=suhanwijaya"><img src="https://github.com/suhanw.png?size=200"/></a><span>Liked what you&#x27;ve read? <br/><a href="https://www.linkedin.com/comm/mynetwork/discovery-see-all?usecase=PEOPLE_FOLLOWS&amp;followMember=suhanwijaya">Follow me on LinkedIn!</a></span></div></nav></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"intro-to-react-server-side-rendering","contentHtml":"\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/900/1*PXvYmj3eEqaRigoFGcJZTA.jpeg'\u003e\n\t\u003cfigcaption\u003eSource: \u003ca href=\"https://www.reddit.com/r/ProgrammerHumor/comments/5lnsko/programming_environment_dilbert_comic_strip_on/\"\u003eReddit\u003c/a\u003e and Dilbert by Scott Adams\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003chr\u003e\n\u003cp\u003eThis is the first in (hopefully) a series of articles to document the lessons I learned building and maintaining SSR apps.\u003c/p\u003e\n\u003cp\u003eThis article does not cover the pros/cons of SSR, or the pros/cons of not using tooling or frameworks (e.g., Create React App, Next.js, etc).\u003c/p\u003e\n\u003cp\u003eI fully acknowledge that manually setting up build configs is painful. There is plenty of great tooling out there to abstract away these configs, so you probably don‚Äôt even need to touch any of this stuff to build awesome apps.\u003c/p\u003e\n\u003cp\u003eBut for those ready to embrace the pain‚Ä¶\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eOverview\u003c/h3\u003e\n\u003cp\u003eLet‚Äôs start with the basics. We will use \u003cstrong\u003eReact\u003c/strong\u003e , \u003cstrong\u003ewebpack\u003c/strong\u003e , and \u003cstrong\u003eExpress\u003c/strong\u003e to build an SSR app that works as follows:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eBrowser sends HTTP request to server to load a page.\u003c/li\u003e\n\u003cli\u003eServer receives HTTP request and turns React JSX into HTML markup.\u003c/li\u003e\n\u003cli\u003eServer inserts the markup into a HTML template and sends the HTML response back to the browser.\u003c/li\u003e\n\u003cli\u003eBrowser renders the HTML, downloads the client-side JavaScript bundle, and ‚Äúhydrates‚Äù the HTML.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAlso, I will focus on dev mode to keep this article short. I‚Äôm saving production mode for a future(ish üòÖ) article.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eProject structure\u003c/h3\u003e\n\u003cp\u003eBefore diving into the code, let‚Äôs get situated with the project structure.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e.\n+-- client\n| +-- components\n| | +-- App\n| | | +-- index.js\n| | | +-- style.less\n| +-- index.js\n+-- server\n| +-- index.js\n+-- babel.config.js\n+-- package.json\n+-- webpack.client.config.js\n+-- webpack.server.config.js\n+-- webpack.shared.config.js\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eA quick rundown of the files in this project:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./client/components\u003c/code\u003e contains React and CSS code.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./client/index.js\u003c/code\u003e is the client-side \u003ca href=\"https://webpack.js.org/concepts/entry-points/\"\u003eentry point\u003c/a\u003e for webpack, where we ‚Äúhydrate‚Äù the HTML rendered on the server-side.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./server/index.js\u003c/code\u003e is the server-side \u003ca href=\"https://webpack.js.org/concepts/entry-points/\"\u003eentry point\u003c/a\u003e for webpack, where we define the route to serve the HTML page.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./babel.config.js\u003c/code\u003e is the \u003ca href=\"https://babeljs.io/docs/en/config-files#configuration-file-types\"\u003ething\u003c/a\u003e that enables you to use React JSX and ES6+ features in the browser and Node.js. You may have seen alternative versions of this file (.babelrc, babel.config.json, etc).\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./webpack.shared.config.js\u003c/code\u003e is the config that webpack uses for both client-side and server-side code.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./webpack.client.config.js\u003c/code\u003e is the config specific to the client-side code.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003e./webpack.server.config.js\u003c/code\u003e is the config specific to the server-side code.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eDependencies\u003c/h3\u003e\n\u003cp\u003eHere are the dependencies (and versions) used at the time of this writing. I will also mention which relevant dependencies to install in each of the following sections.\u003c/p\u003e\n\u003cscript src='https://gist.github.com/suhanw/2afd2841c1beb5a107b5547b27b786be.js'\u003e\u003c/script\u003e\n\u003cp\u003eNow let‚Äôs look at each file in our project in more detail.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003ewebpack\u003c/h3\u003e\n\u003cp\u003eIf you are accustomed to building SPAs (Single Page Apps), you may not have needed webpack to process your server-side code. But to enable SSR, the server must be able to read React code, or specifically‚Ää‚Äî‚ÄäJSX. This means, we now need webpack to work its magic on our server-side code. Plus, you‚Äôll also get to use ES6+ syntax that may not be natively supported in Node.js, e.g., import and export. (Sidenote: you don‚Äôt need webpack if you choose \u003ca href=\"https://reactjs.org/docs/react-without-jsx.html\"\u003enot to write JSX\u003c/a\u003e at all. üò¨)\u003c/p\u003e\n\u003cp\u003eI won‚Äôt go through every webpack option in great detail, but here is a \u003ca href=\"https://www.valentinog.com/blog/webpack/\"\u003egreat explainer\u003c/a\u003e if you are interested.\u003c/p\u003e\n\u003ch4\u003e\u003cem\u003eCommon webpack config for client-side and server-side\u003c/em\u003e\u003c/h4\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i webpack webpack-cli babel-loader\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cscript src='https://gist.github.com/suhanw/128bbb5bdfb18b854d0ca0ed2ee5b884.js'\u003e\u003c/script\u003e\n\u003cp\u003eAnnotations of the code comments above:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[A]\u003c/strong\u003e For our purposes, we want to explicitly set \u003ccode class=\"language-unknown\"\u003emode\u003c/code\u003e to \u003cstrong\u003edevelopment\u003c/strong\u003e. If we go with the default value of \u003cstrong\u003eproduction\u003c/strong\u003e , we may lose useful console warnings/errors from libraries like React, and the error stack traces are incredibly hard to read due to code minification. Read more about \u003cstrong\u003eproduction\u003c/strong\u003e and \u003cstrong\u003edevelopment\u003c/strong\u003e modes \u003ca href=\"https://webpack.js.org/configuration/mode/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[B]\u003c/strong\u003e This tells webpack to preprocess \u003ccode class=\"language-unknown\"\u003e.js\u003c/code\u003e files with \u003ccode class=\"language-unknown\"\u003ebabel-loader\u003c/code\u003e, which \u003ca href=\"https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them#:~:text=Transpilers%2C%20or%20source%2Dto%2D,are%20said%20to%20target%20JavaScript.\"\u003etranspiles\u003c/a\u003e ES6+ and JSX code into JavaScript code that is readable by browsers and Node.js servers. This loader uses the options we specify in \u003ccode class=\"language-unknown\"\u003ebabel.config.js\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[C]\u003c/strong\u003e This means I don‚Äôt have to type out \u003ccode class=\"language-unknown\"\u003e.js\u003c/code\u003e or \u003ccode class=\"language-unknown\"\u003e.less\u003c/code\u003e when importing files with those extensions. For example, \u003ccode class=\"language-unknown\"\u003eimport App from ‚Äò./components/App‚Äô\u003c/code\u003e.\u003c/p\u003e\n\u003ch4\u003e\u003cem\u003eBabel config\u003c/em\u003e\u003c/h4\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i babel-loader @babel/core @babel/preset-env @babel/preset-react\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cscript src='https://gist.github.com/suhanw/33f2d36ef3922ebbb4ce3d425e407eaa.js'\u003e\u003c/script\u003e\n\u003cp\u003eAnnotations of the code comments above:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[A]\u003c/strong\u003e This tells webpack to transpile ES6+ features into JS code that‚Äôs natively supported in Node.js and (most modern) browsers. Read the \u003ca href=\"https://babeljs.io/docs/en/babel-preset-env\"\u003edocs\u003c/a\u003e for more details.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[B]\u003c/strong\u003e This tells webpack to transpile React JSX into JavaScript code. Read the \u003ca href=\"https://babeljs.io/docs/en/babel-preset-react\"\u003edocs\u003c/a\u003e for more details.\u003c/p\u003e\n\u003ch4\u003e\u003cem\u003eClient-side webpack config\u003c/em\u003e\u003c/h4\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i webpack webpack-cli webpack-merge webpack-dev-server mini-css-extract-plugin css-loader less-loader less\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cscript src='https://gist.github.com/suhanw/98c17ffc82967bc28a84289f9b55d54b.js'\u003e\u003c/script\u003e\n\u003cp\u003eAnnotations of the code comments above:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[A]\u003c/strong\u003e This is the entry point for the client-side code, where we render the React app into the DOM.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[B]\u003c/strong\u003e This tells webpack to save the transpiled client-side JS bundle output as \u003ccode class=\"language-unknown\"\u003e./build/client/scripts/bundle.js\u003c/code\u003e. Not super important for dev mode because we are using webpack-dev-server to transpile the client-side bundle ‚Äúin memory‚Äù. Per the \u003ca href=\"https://webpack.js.org/guides/development/#using-webpack-dev-server\"\u003edocs\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003ewebpack-dev-server\u003c/code\u003e doesn‚Äôt write any output files after compiling. Instead, it keeps bundle files in memory and serves them as if they were real files mounted at the server‚Äôs root path.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003e[C]\u003c/strong\u003e The \u003ccode class=\"language-unknown\"\u003epublicPath\u003c/code\u003e option tells webpack where we will be serving the client-side bundle. Notice that we are using the same \u003ccode class=\"language-unknown\"\u003eclientPort\u003c/code\u003e for \u003ccode class=\"language-unknown\"\u003edevServer\u003c/code\u003e, which tells \u003ccode class=\"language-unknown\"\u003ewebpack-dev-server\u003c/code\u003e to serve the client-side bundle from \u003ccode class=\"language-unknown\"\u003ehttp://localhost:8080/\u003c/code\u003e. And since the \u003ccode class=\"language-unknown\"\u003efilename\u003c/code\u003e option tells webpack to nest \u003ccode class=\"language-unknown\"\u003ebundle.js\u003c/code\u003e in a \u003ccode class=\"language-unknown\"\u003escripts\u003c/code\u003e folder, the client-side bundle will be served from \u003ccode class=\"language-unknown\"\u003elocalhost:8080/scripts/bundle.js\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[D]\u003c/strong\u003e \u003ca href=\"https://css-tricks.com/css-modules-part-1-need/\"\u003eCSS modules\u003c/a\u003e and CSS preprocessors (e.g., Less, Sass) deserve an article. But in a nutshell, this piece of config tells webpack to:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003etranspile \u003ccode class=\"language-unknown\"\u003e.less\u003c/code\u003e files into CSS code that the browser understands,\u003c/li\u003e\n\u003cli\u003eallow us to \u003ccode class=\"language-unknown\"\u003eimport style from ‚Äò./style.less‚Äô\u003c/code\u003e which is scoped \u003cstrong\u003elocally\u003c/strong\u003e to the component importing it (i.e., we don‚Äôt have to worry about CSS class naming collisions or specificity issues as the app grows),\u003c/li\u003e\n\u003cli\u003egenerate a CSS bundle that‚Äôs served separately from the JS bundle. In this instance, the \u003ccode class=\"language-unknown\"\u003eMiniCssExtractPlugin\u003c/code\u003e tells webpack to serve the CSS bundle from \u003ccode class=\"language-unknown\"\u003elocalhost:8080/styles/bundle.css\u003c/code\u003e in dev mode.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e[E]\u003c/strong\u003e Remember \u003ccode class=\"language-unknown\"\u003ewebpack.shared.config.js\u003c/code\u003e? This line merges \u003ccode class=\"language-unknown\"\u003ewebpack.shared.config.js\u003c/code\u003e with \u003ccode class=\"language-unknown\"\u003ewebpack.client.config.js\u003c/code\u003e.\u003c/p\u003e\n\u003ch4\u003e\u003cem\u003eServer-side webpack config\u003c/em\u003e\u003c/h4\u003e\n\u003cp\u003eHang in there, this is the last webpack config that we‚Äôll cover.\u003c/p\u003e\n\u003cp\u003eInstall the relevant dependencies (and grab a ‚òïÔ∏è):\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i webpack webpack-cli webpack-node-externals css-loader\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cscript src='https://gist.github.com/suhanw/93565516165d8225566ee0dcac854e3d.js'\u003e\u003c/script\u003e\n\u003cp\u003eAnnotations of the code comments above:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[A]\u003c/strong\u003e The default value is \u003cstrong\u003eweb\u003c/strong\u003e, so we need to explicitly set it to \u003cstrong\u003enode\u003c/strong\u003e for webpack to work its magic on the server-side code.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[B]\u003c/strong\u003e This is the entry point for the server-side code.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[C]\u003c/strong\u003e This tells webpack to save the transpiled server-side JS bundle output as \u003ccode class=\"language-unknown\"\u003e./build/server/bundle.js\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[D]\u003c/strong\u003e This tells webpack not to include the code from \u003ccode class=\"language-unknown\"\u003enode\\_modules\u003c/code\u003e in the server-side bundle.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[E]\u003c/strong\u003e This tells webpack not to do any work over the CSS code on the server-side, but simply to make sure that every HTML element‚Äôs \u003ccode class=\"language-unknown\"\u003eclassName\u003c/code\u003e matches that in the CSS code being served on the client-side.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[F]\u003c/strong\u003e Remember \u003ccode class=\"language-unknown\"\u003ewebpack.shared.config.js\u003c/code\u003e? This line merges \u003ccode class=\"language-unknown\"\u003ewebpack.shared.config.js\u003c/code\u003e with \u003ccode class=\"language-unknown\"\u003ewebpack.server.config.js\u003c/code\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eReact component\u003c/h3\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i react\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLet‚Äôs create a simple React component \u003ccode class=\"language-unknown\"\u003eApp\u003c/code\u003e, which renders our favorite greeting with some basic styles, as well as a button that displays an alert dialog when clicked. We will render this component on the server-side and hydrate it on the client-side.\u003c/p\u003e\n\u003cscript src='https://gist.github.com/suhanw/22786482aae23f82852b3fa15faf46e0.js'\u003e\u003c/script\u003e\n\u003cscript src='https://gist.github.com/suhanw/ff1f2997761dbec42ae3a80b7c7bdca2.js'\u003e\u003c/script\u003e\n\u003chr\u003e\n\u003ch3\u003eServer-side code\u003c/h3\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i express react react-dom\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eLet‚Äôs create an Express server and define a route that serves an HTML page when a user visits \u003ccode class=\"language-unknown\"\u003ehttp://localhost:3000/\u003c/code\u003e.\u003c/p\u003e\n\u003cscript src='https://gist.github.com/suhanw/23f6122050af076a51199a8d4b165d5b.js'\u003e\u003c/script\u003e\n\u003cp\u003eAnnotations of the code comments above:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[A]\u003c/strong\u003e This turns the React component \u003ccode class=\"language-unknown\"\u003eApp\u003c/code\u003e into HTML string, which we then insert in between the \u003ccode class=\"language-unknown\"\u003ediv\u003c/code\u003e with the ID \u003cstrong\u003e‚Äússr-app‚Äù.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e[B]\u003c/strong\u003e Remember the \u003ccode class=\"language-unknown\"\u003edevServer\u003c/code\u003e option in \u003ccode class=\"language-unknown\"\u003ewebpack.client.config.js\u003c/code\u003e to start \u003ccode class=\"language-unknown\"\u003ewebpack-dev-server\u003c/code\u003e in dev mode? These script and link tags tell the browser to fetch the client-side JS and CSS bundles respectively from the webpack-dev-server running on \u003ccode class=\"language-unknown\"\u003ehttp://localhost:8080\u003c/code\u003e.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eClient-side code\u003c/h3\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i react react-dom\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIn the client-side entry point, we will ‚Äú\u003ca href=\"https://reactjs.org/docs/react-dom.html#hydrate\"\u003ehydrate\u003c/a\u003e‚Äù the React component that was SSR-ed into the root DOM container with the ID \u003cstrong\u003e‚Äússr-app‚Äù\u003c/strong\u003e.\u003c/p\u003e\n\u003cscript src='https://gist.github.com/suhanw/be366494b9bf2bdbd2272c732f1bbbe8.js'\u003e\u003c/script\u003e\n\u003cp\u003ePer the \u003ca href=\"https://reactjs.org/docs/react-dom-server.html#rendertostring\"\u003edocs\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you call \u003ca href=\"https://reactjs.org/docs/react-dom.html#hydrate\"\u003e\u003cem\u003eReactDOM.hydrate()\u003c/em\u003e\u003c/a\u003e on a node that already has this server-rendered markup, React will preserve it and only attach event handlers, allowing you to have a very performant first-load experience.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo in this example, the client-side code simply attaches the button‚Äôs click handler without having to re-render any markup in the \u003ccode class=\"language-unknown\"\u003eApp\u003c/code\u003e component.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003ePutting it all together\u003c/h3\u003e\n\u003cp\u003eInstall the relevant dependencies:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003enpm i rimraf webpack webpack-cli webpack-dev-server npm-run-all nodemon\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis is the \u003ccode class=\"language-unknown\"\u003escripts\u003c/code\u003e key in the \u003ccode class=\"language-unknown\"\u003epackage.json\u003c/code\u003e file, where we define several \u003ccode class=\"language-unknown\"\u003enpm\u003c/code\u003e scripts to build and start the app in dev mode.\u003c/p\u003e\n\u003cscript src='https://gist.github.com/suhanw/5c87c373511b0d2e053ebca5fde8d6aa.js'\u003e\u003c/script\u003e\n\u003cp\u003eLet‚Äôs look at each of them:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003eclear\u003c/code\u003e‚Ää‚Äî‚ÄäThis uses \u003ca href=\"https://github.com/isaacs/rimraf\"\u003erimraf\u003c/a\u003e to delete the \u003ccode class=\"language-unknown\"\u003e./build\u003c/code\u003e folder.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003ebuild:server\u003c/code\u003e‚Ää‚Äî‚ÄäThis tells webpack to build the server-side code and save the bundle output to \u003ccode class=\"language-unknown\"\u003e./build/server/bundle.js\u003c/code\u003e (as per \u003ccode class=\"language-unknown\"\u003e./webpack.server.config.js\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003estart:server\u003c/code\u003e‚Ää‚Äî‚ÄäThis starts the Express server on \u003ccode class=\"language-unknown\"\u003ehttp://localhost:3000\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003edev:server\u003c/code\u003e‚Ää‚Äî‚ÄäThis uses \u003ca href=\"https://github.com/remy/nodemon\"\u003enodemon\u003c/a\u003e to monitor any file changes in the working directory (minus \u003ccode class=\"language-unknown\"\u003e./build\u003c/code\u003e), and \u003ca href=\"https://dev.to/scottw/npm-run-all-b7e-temp-slug-8424854\"\u003enpm-run-all\u003c/a\u003e to re-run \u003ccode class=\"language-unknown\"\u003eclear\u003c/code\u003e, \u003ccode class=\"language-unknown\"\u003ebuild:server\u003c/code\u003e, and \u003ccode class=\"language-unknown\"\u003estart:server\u003c/code\u003e whenever there are file changes.\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003edev:client\u003c/code\u003e‚Ää‚Äî‚ÄäThis tells webpack to ‚Äúbuild‚Äù the client-side code, save the bundle output ‚Äúin memory‚Äù, and serve it from \u003ccode class=\"language-unknown\"\u003ehttp://localhost:8080\u003c/code\u003e (as per \u003ccode class=\"language-unknown\"\u003e./webpack.client.config.js\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003ccode class=\"language-unknown\"\u003edev\u003c/code\u003e‚Ää‚Äî‚ÄäThis runs all of the above with a single command.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eRun \u003ccode class=\"language-unknown\"\u003enpm run dev\u003c/code\u003e in the terminal to spin up the SSR app. Open up \u003ccode class=\"language-unknown\"\u003ehttp://localhost:3000\u003c/code\u003e in your browser. üéâü•≥\u003c/p\u003e\n\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/1024/1*ht6aRr0glttBE5TlouMJJQ.png'\u003e\u003cfigcaption\u003eServer-side rendering and client-side hydration\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003cp\u003eAnd click on the button \u003ccode class=\"language-unknown\"\u003eSay Hello Back!\u003c/code\u003e üôåüéä\u003c/p\u003e\n\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/1024/1*JcnDOG4whmExaBhNoyG8Vg.png'\u003e\u003cfigcaption\u003eClicking the button triggers the alert dialog\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003cp\u003eNow, let‚Äôs disable client-side JavaScript‚Ä¶\u003c/p\u003e\n\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/722/1*43qx5zcj8QnwSjXQT-Nhsw.png'\u003e\u003cfigcaption\u003eDisable client-side JavaScript\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003cp\u003e‚Ä¶and refresh the page. IT‚ÄôS NOT A BLANK PAGE! ü§Ø\u003c/p\u003e\n\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/1024/1*fFgBAnbm-9c3gN6J_yA1eg.png'\u003e\u003cfigcaption\u003eServer-side rendered page\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003cp\u003eSidenote: nothing will happen if you click on the button. That‚Äôs because the event handlers are attached by the client-side code (aka ‚Äúhydration‚Äù). Recall the \u003ca href=\"https://reactjs.org/docs/react-dom-server.html#rendertostring\"\u003edocs\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you call \u003ca href=\"https://reactjs.org/docs/react-dom.html#hydrate\"\u003e\u003cem\u003eReactDOM.hydrate()\u003c/em\u003e\u003c/a\u003e on a node that already has this server-rendered markup, React will preserve it and only attach event handlers, allowing you to have a very performant first-load experience.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAnd since we disabled client-side JavaScript, what you see is just plain HTML.\u003c/p\u003e\n\u003cfigure\u003e\n\t\u003cimg src='https://cdn-images-1.medium.com/max/894/1*xGp1Ds4XtlabyFoGwI2G1A.jpeg'\u003e\u003cfigcaption\u003eSource: \u003ca href=\"https://www.thecoderpedia.com/blog/programming-memes/\"\u003eCoderPedia\u003c/a\u003e\u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003cp\u003eIn future(ish üòÖü§ûüèª) articles, I plan to cover more advanced features like routing, data fetching, caching, code-splitting, lazy-loading, and deploying a production app.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003eResources\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.valentinog.com/blog/webpack/\"\u003eA mostly complete guide to webpack 5\u003c/a\u003e by \u003ca href=\"https://twitter.com/gagliardi_vale\"\u003eValentino Gagliardi\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them#:~:text=Transpilers,%20or%20source-to-,are%20said%20to%20target%20JavaScript.\"\u003eJavaScript Transpilers: What \u0026#x26; Why\u003c/a\u003e by \u003ca href=\"https://medium.com/u/1baf735d9bdc\"\u003ePeleke Sengstacke\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://css-tricks.com/css-modules-part-1-need/\"\u003eWhat are CSS Modules and why do we need them?\u003c/a\u003e by \u003ca href=\"https://medium.com/u/aae529a3f8b0\"\u003eRobin Rendle\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eRead More\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.suhanwijaya.com/posts/deploy-react-ssr-to-production\"\u003eDeploy React SSR to Production\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.suhanwijaya.com/posts/use-github-actions-deploy-nextjs-ssg-site\"\u003eUse GitHub Actions to Deploy a Next.js SSG Site\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.to/suhanw/decouple-data-from-ui-with-react-hooks-3amn\"\u003eDecouple Data from UI with React Hooks\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","pin_order":6,"title":"Intro to React Server Side Rendering","description":"How to build a React SSR app without any tooling or framework","image":"https://cdn-images-1.medium.com/max/900/1*PXvYmj3eEqaRigoFGcJZTA.jpeg","tags":"javascript,react,nodejs,webdev","canonical_url":"https://medium.com/javascript-in-plain-english/intro-to-react-server-side-rendering-3c2af3782d08","date":"2021-01-11"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"intro-to-react-server-side-rendering"},"buildId":"awZpr0fKXkdd-kUghblY6","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e3f124d20a714e6dd239.js"></script><script src="/_next/static/chunks/main-5e53dfd826fb0870df0c.js" async=""></script><script src="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" async=""></script><script src="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" async=""></script><script src="/_next/static/chunks/c8817c810ac732b2202d2ab097cea034b8097b3b.0aef9695673ee5c17c2c.js" async=""></script><script src="/_next/static/chunks/styles.4e63e5dd6521d2c490cd.js" async=""></script><script src="/_next/static/chunks/pages/_app-bc363205d93151ffb13d.js" async=""></script><script src="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.394c661130a14bd5fdbf.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-c120c2a45802d4c26e9e.js" async=""></script><script src="/_next/static/awZpr0fKXkdd-kUghblY6/_buildManifest.js" async=""></script><script src="/_next/static/awZpr0fKXkdd-kUghblY6/_ssgManifest.js" async=""></script></body></html>